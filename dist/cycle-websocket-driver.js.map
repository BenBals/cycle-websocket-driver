{"version":3,"sources":["../src/websocket-driver.js"],"names":[],"mappings":";;;;;AAAA,IAAI,EAAE,GAAG,OAAO,CAAE,IAAI,CAAC,CAAA;;AAEvB,SAAS,mBAAmB,CAAE,GAAG,EAAE;AAC/B,QAAI,EAAE,GAAG,IAAI,SAAS,CAAC,GAAG,CAAC,CAAA;AAC3B,WAAO,SAAS,eAAe,CAAE,SAAS,EAAE;AACxC,YAAI,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,QAAQ,EAAE;AACtD,cAAE,CAAC,SAAS,GAAG,UAAA,GAAG,EAAI;AAClB,uBAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;AAChC,uBAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;AAChB,wBAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;aACvB,CAAA;AACD,cAAE,CAAC,MAAM,GAAG,UAAA,EAAE;uBAAI,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC;aAAA,CAAA;AAClD,cAAE,CAAC,OAAO,GAAG,UAAA,EAAE;uBAAI,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;aAAA,CAAA;SACrC,CAAC,CAAA;;AAEF,iBAAS,CAAC,SAAS,CAAC,UAAA,OAAO,EAAI;AAC3B,mBAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,OAAO,CAAC,CAAA;AAC1C,cAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SACnB,CAAC,CAAA;AACF,eAAO,UAAU,CAAA;KACpB,CAAA;CACJ;;kBAEc,mBAAmB","file":"cycle-websocket-driver.js","sourcesContent":["let rx = require ('rx')\n\nfunction makeWebsocketDriver (url) {\n    let ws = new WebSocket(url)\n    return function websocketDriver (requests$) {\n        let $responses = Rx.Observable.create(function (observer) {\n            ws.onmessage = msg => {\n                console.log('received message:')\n                console.log(msg)\n                observer.onNext(msg)\n            }\n            ws.onopen = ev => console.log('connection opened')\n            ws.onerror = ev => console.log(ev)\n        })\n\n        requests$.subscribe(request => {\n            console.log('sending message: ' + request)\n            ws.send(request)\n        })\n        return $responses\n    }\n}\n\nexport default makeWebsocketDriver\n"]}